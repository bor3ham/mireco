@use 'sass:color'
@use 'sass:math'

@use '../variables' as *

.MIRECO-day-calendar
  width: 15rem
  height: 15rem
  color: $content-foreground

  >.calendar-header
    margin-bottom: math.div($standard-padding, 2)
    h5
      margin: 0
      font-weight: $standard-font-weight
      font-size: ($standard-font-size * 0.9)
      color: $content-muted
      text-align: center
    button
      background: none
      outline: none
      border: none
      padding: math.div($standard-padding, 2) 0
      margin: 0
      cursor: pointer
      svg
        width: ($standard-padding * 2)
        path
          // important to override inline style for no css fallback
          stroke: $content-muted !important
      &:hover svg path
        // important to override inline style for no css fallback
        stroke: $primary-colour !important

  >table
    tbody
      tr
        td, th
          text-align: center
          font-weight: $standard-font-weight
        th
          color: $content-muted
          font-size: ($standard-font-size * 0.7)
        td
          padding: 1px 0
          button
            position: relative
            font-size: ($standard-font-size * 0.8)
            color: $content-foreground
            background: none
            border: 1px solid rgba(0, 0, 0, 0)
            &:focus
              outline: none
              border: none
            &:not(:disabled):not(.disabled)
              cursor: pointer
              &:hover
                color: $content-foreground
                background: $content-faint
          &.invalid
            opacity: 0.1
          &.outside-month
            button
              opacity: 0.7
          &.highlight
            button:after
              content: ' '
              position: absolute
              top: -1px
              left: -1px
              right: -1px
              bottom: -1px
              border-top: 1px dashed $secondary-colour
              border-bottom: 1px dashed $secondary-colour
            &.first-highlight button:after
              border-left: 1px dashed $secondary-colour
              border-top-left-radius: $edge-rounding
              border-bottom-left-radius: $edge-rounding
            &.last-highlight button:after
              border-right: 1px dashed $secondary-colour
              border-top-right-radius: $edge-rounding
              border-bottom-right-radius: $edge-rounding
          &.current
            button
              background: $primary-colour
              color: $primary-content-colour
          &:not(.current).selected
            button
              background: color.adjust($primary-colour, $alpha: 0.2)
          &.selected
            &.first-selected button
              border-top-left-radius: $edge-rounding
              border-bottom-left-radius: $edge-rounding
            &.last-selected button
              border-top-right-radius: $edge-rounding
              border-bottom-right-radius: $edge-rounding
          
          $corner-tag-size: 8px
          $corner-tag-margin: 2px
          position: relative
          &.today:after
            content: ''
            position: absolute
            left: 0
            top: 1px
            width: 0
            height: 0
            border-style: solid
            border-width: 0 0 $corner-tag-size $corner-tag-size
            border-color: transparent transparent transparent $secondary-colour
            border-top-left-radius: 2px
            pointer-events: none
